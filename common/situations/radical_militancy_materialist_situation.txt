situation_radical_materialist_militancy = {
	picture = GFX_evt_alien_segregation
	category = negative

	desc = situation_radical_materialist_militancy_desc

	fail_icon = GFX_situation_outcome_meh
	fail_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		if = {
			limit = { years_passed < 3 }
			log_error = "Isn't it a bit early to have a revolt? Owner: [Owner.GetName] (Origin: [Owner.GetOriginName]), Target: [Target.GetName]."
		}
	}

	on_progress_complete = {
		custom_tooltip = situation_radical_materialist_militancy_complete
		situation_event = { id = confrontations_materialist.90 } # Coup
		owner = {
			# random_events = {
			# 	40 = confrontations_materialist.90 # Coup
			# 	60 = confrontations_materialist.91 # Putch
			# }
		}
	}

	on_fail = {
		custom_tooltip = situation_radical_materialist_militancy_fail
		hidden_effect = {
			owner = {
				# Give materialist satiated modifier
			}
			destroy_situation = this
		}
	}

	on_abort = {
		# Fire event saying militancy is over
	}

	abort_trigger = {
		NOT = {
			owner = { 
				has_faction = radical_materialist
			}
		}
	}

	start_value = 10

	stages = {
		radical_materialist_faction_militancy_complacent = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_green
			
			end = 25
		}
		radical_materialist_faction_militancy_active = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_blue
			# on_first_enter = {
			# 	#Characteristics of the revolt (ethics)
			# 	situation_event = { id = unrest.100 }
			# }
			end = 75
		}
		radical_materialist_faction_militancy_desperate = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
		}
	}

	on_monthly = {
		situation_event = { id = confrontations_materialist.16 } # Gift 
		# if = {
		# 	limit = {
		# 		current_stage = radical_materialist_faction_militancy_complacent
		# 	}
		# 	random_events = {
		# 		# 1000 = 0
		# 		10 = confrontations_materialist.16 # Gift
		# 		# 10 = confrontations_materialist.12 # New leader
		# 		# 10 = confrontations_materialist.10 # Materialist policy wording
		# 		# 10 = confrontations_materialist.14 # Faction trade deal
		# 		# 10 = confrontations_materialist.11 # Inspiring speech
		# 	}
		# }

		# if = {
		# 	limit = {
		# 		current_stage = radical_materialist_faction_militancy_active
		# 	}
		# 	random_events = {
		# 		# 1000 = 0
		# 		# 10 = confrontations_materialist.30 # Spiritualist Book Burning
		# 		# 10 = confrontations_materialist.20 # Materialist Riots and Endorse Movement
		# 		# 10 = confrontations_materialist.13 # Leader got owned
		# 		# 10 = confrontations_materialist.15 # Faction leader in debt
		# 		10 = confrontations_materialist.21 # Materialist Corner Market 				
		# 	}
		# }

		# if = {
		# 	limit = {
		# 		current_stage = radical_materialist_faction_militancy_desperate
		# 	}
		# 	random_events = {
		# 		# 1000 = 0
		# 		10 = confrontations_materialist.80 # Ruler Assassinated
		# 		# 10 = confrontations_materialist.81 # Faction Leader Assassinated
		# 		# 10 = confrontations_materialist.30 # Spiritualist Book Burning
		# 		# 10 = confrontations_materialist.20 # Materialist Riots and Endorse Movement
		# 	}
		# }		
	}

	monthly_progress = {
		base = 0
		# modifier = {
		# 	add = value:deficit_situation_progress_value|RESOURCE|energy|
		# 	desc = string_expenditures_greater_than_income_energy
		# 	owner = { has_actual_deficit = { RESOURCE = energy } }
		# }
		# modifier = {
		# 	subtract = 5
		# 	desc = string_not_in_deficit_energy
		# 	owner = {
		# 		has_modifier = {
		# 			resource = energy
		# 			value >= 0
		# 		}
		# 	}
		# }
		# modifier = {
		# 	subtract = 1
		# 	desc = string_resource_reserves_energy
		# 	owner = {
		# 		has_negative_income_with_stockpile = { RESOURCE = energy }
		# 	}
		# }
	}

	approach = {
		name = approach_radical_materialist_militancy_ambivalent
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
		ai_weight = {
			base = 2
		}
	}

	approach = {
		name = approach_radical_materialist_militancy_appeasement
		icon = GFX_situation_approach_handshake
		icon_background = GFX_situation_approach_bg_green
		resources = {
			category = situations
			upkeep = {
				unity = 30
			}
		}
		ai_weight = {
			base = 2
		}
	}

	approach = {
		name = approach_radical_materialist_militancy_crackdown
		icon = GFX_situation_approach_whip
		icon_background = GFX_situation_approach_bg_red
		resources = {
			category = situations
			upkeep = {
				unity = 30
			}
		}
		ai_weight = {
			base = 1
		}
	}
}